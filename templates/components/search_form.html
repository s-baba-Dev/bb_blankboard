<form method="get" class="mb-6 flex gap-2">

  <!-- ======================= -->
  <!-- キーワード検索入力 -->
  <!-- ======================= -->
  <!--
    ・name="q" が検索クエリ
    ・value に現在の検索語を入れることで
      検索後も入力内容を保持する
  -->
  <input
    type="text"
    name="q"
    value="{{ q or '' }}"
    placeholder="検索キーワード..."
    class="border border-gray-300 rounded px-3 py-2 w-64"
  >

  <!-- ======================= -->
  <!-- 検索以外の状態保持用 hidden -->
  <!-- ======================= -->
  <!--
    検索を実行しても
    ・並び替え
    ・表示件数
    ・カテゴリ / トピック / グループ
    の状態がリセットされないように保持する
  -->
  <input type="hidden" name="sort" value="{{ sort }}">
  <input type="hidden" name="limit" value="{{ limit }}">

  <!--
    新しい検索を行うため
    ページ番号は必ず 1 に戻す
  -->
  <input type="hidden" name="page" value="1">

  <!--
    カテゴリ階層の絞り込み状態を保持
    未選択の場合は空文字
  -->
  <input type="hidden" name="category_id" value="{{ category_id or '' }}">
  <input type="hidden" name="topic_id" value="{{ topic_id or '' }}">
  <input type="hidden" name="group_id" value="{{ group_id or '' }}">

  <!-- ======================= -->
  <!-- 検索実行ボタン -->
  <!-- ======================= -->
  <button
    type="submit"
    class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
  >
    検索
  </button>

</form>
